{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\iamhe\\\\OneDrive\\\\Documents\\\\GitHub\\\\project-two-mern-app\\\\client\\\\src\\\\context\\\\auth_context\\\\AuthState.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport authReducer from \"./authReducer\";\nimport * as ActionTypes from \"../ContextActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport default function AuthState(props) {\n  _s();\n\n  const initialState = {\n    token: localStorage.getItem(\"token\"),\n    currentUser: null,\n    toasts: null,\n    isAuthenticated: null\n  };\n  const [state, dispatch] = useReducer(authReducer, initialState);\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"x-auth-token\": localStorage.getItem(\"token\")\n    }\n  }; // #region --------------[ Actions ]--------------\n\n  const registerUser = async userData => {\n    try {\n      const res = await axios.post(\"/api/users/register\", userData, config);\n      dispatch({\n        type: ActionTypes.REGISTER_SUCCESS,\n        payload: res.data\n      });\n    } catch (err) {\n      console.log(err.response.data);\n      dispatch({\n        type: ActionTypes.REGISTER_FAIL,\n        payload: err.response.data\n      });\n    }\n  };\n\n  const loginUser = async userData => {\n    try {\n      const res = await axios.post(\"/api/users/login\", userData, config);\n      dispatch({\n        type: ActionTypes.LOGIN_SUCCESS,\n        payload: res.data\n      });\n    } catch (err) {\n      console.log(err.response.data);\n      dispatch({\n        type: ActionTypes.LOGIN_FAIL,\n        payload: err.response.data\n      });\n    }\n  };\n\n  const logoutUser = async () => {\n    dispatch({\n      type: ActionTypes.LOGOUT\n    });\n  };\n\n  const clearErrors = () => {\n    dispatch({\n      type: ActionTypes.CLEAR_ERRORS\n    });\n  };\n\n  const getProfile = async () => {\n    try {\n      const res = await axios.get(\"/api/users/profile\", config);\n      dispatch({\n        type: ActionTypes.SET_CURRENT_USER,\n        payload: res.data\n      });\n    } catch (err) {\n      console.log(err.response.data);\n      dispatch({\n        type: ActionTypes.AUTH_ERROR,\n        payload: err.response.data\n      });\n    }\n  };\n\n  const updateUser = async userData => {\n    try {\n      const res = await axios.put(`/api/users/${userData._id}`, userData, config);\n      dispatch({\n        type: ActionTypes.SET_CURRENT_USER,\n        payload: res.data\n      });\n    } catch (err) {\n      console.log(err.response.data);\n      dispatch({\n        type: ActionTypes.AUTH_ERROR,\n        payload: err.response.data\n      });\n    }\n  }; // #endregion\n\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token: state.token,\n      currentUser: state.currentUser,\n      toasts: state.toasts,\n      isAuthenticated: state.isAuthenticated,\n      registerUser,\n      loginUser,\n      logoutUser,\n      clearErrors,\n      getProfile,\n      updateUser\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AuthState, \"6JWkGZ32UPfojeNx+xqn8ZU8A0Q=\");\n\n_c = AuthState;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthState\");","map":{"version":3,"names":["createContext","useReducer","axios","authReducer","ActionTypes","AuthContext","AuthState","props","initialState","token","localStorage","getItem","currentUser","toasts","isAuthenticated","state","dispatch","config","headers","registerUser","userData","res","post","type","REGISTER_SUCCESS","payload","data","err","console","log","response","REGISTER_FAIL","loginUser","LOGIN_SUCCESS","LOGIN_FAIL","logoutUser","LOGOUT","clearErrors","CLEAR_ERRORS","getProfile","get","SET_CURRENT_USER","AUTH_ERROR","updateUser","put","_id","children"],"sources":["C:/Users/iamhe/OneDrive/Documents/GitHub/project-two-mern-app/client/src/context/auth_context/AuthState.js"],"sourcesContent":["import { createContext, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport authReducer from \"./authReducer\";\r\nimport * as ActionTypes from \"../ContextActions\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport default function AuthState(props) {\r\n  const initialState = {\r\n    token: localStorage.getItem(\"token\"),\r\n    currentUser: null,\r\n    toasts: null,\r\n    isAuthenticated: null,\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"x-auth-token\": localStorage.getItem(\"token\"),\r\n    },\r\n  };\r\n\r\n  // #region --------------[ Actions ]--------------\r\n\r\n  const registerUser = async (userData) => {\r\n    try {\r\n      const res = await axios.post(\"/api/users/register\", userData, config);\r\n      dispatch({\r\n        type: ActionTypes.REGISTER_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    } catch (err) {\r\n      console.log(err.response.data);\r\n      dispatch({\r\n        type: ActionTypes.REGISTER_FAIL,\r\n        payload: err.response.data,\r\n      });\r\n    }\r\n  };\r\n\r\n  const loginUser = async (userData) => {\r\n    try {\r\n      const res = await axios.post(\"/api/users/login\", userData, config);\r\n      dispatch({\r\n        type: ActionTypes.LOGIN_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    } catch (err) {\r\n      console.log(err.response.data);\r\n      dispatch({\r\n        type: ActionTypes.LOGIN_FAIL,\r\n        payload: err.response.data,\r\n      });\r\n    }\r\n  };\r\n\r\n  const logoutUser = async () => {\r\n    dispatch({\r\n      type: ActionTypes.LOGOUT,\r\n    });\r\n  };\r\n\r\n  const clearErrors = () => {\r\n    dispatch({\r\n      type: ActionTypes.CLEAR_ERRORS,\r\n    });\r\n  };\r\n\r\n  const getProfile = async () => {\r\n    try {\r\n      const res = await axios.get(\"/api/users/profile\", config);\r\n      dispatch({\r\n        type: ActionTypes.SET_CURRENT_USER,\r\n        payload: res.data,\r\n      });\r\n    } catch (err) {\r\n      console.log(err.response.data);\r\n      dispatch({\r\n        type: ActionTypes.AUTH_ERROR,\r\n        payload: err.response.data,\r\n      });\r\n    }\r\n  };\r\n\r\n  const updateUser = async (userData) => {\r\n    try {\r\n      const res = await axios.put(\r\n        `/api/users/${userData._id}`,\r\n        userData,\r\n        config\r\n      );\r\n      dispatch({\r\n        type: ActionTypes.SET_CURRENT_USER,\r\n        payload: res.data,\r\n      });\r\n    } catch (err) {\r\n      console.log(err.response.data);\r\n      dispatch({\r\n        type: ActionTypes.AUTH_ERROR,\r\n        payload: err.response.data,\r\n      });\r\n    }\r\n  };\r\n  // #endregion\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        token: state.token,\r\n        currentUser: state.currentUser,\r\n        toasts: state.toasts,\r\n        isAuthenticated: state.isAuthenticated,\r\n        registerUser,\r\n        loginUser,\r\n        logoutUser,\r\n        clearErrors,\r\n        getProfile,\r\n        updateUser,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}